<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Clarity Journal ‚Äì Full Feature Demo</title>
  <link href="https://fonts.googleapis.com/css?family=Nunito:400,700&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
  <style>
    :root {
      --bg: #fdf6f3;
      --card: rgba(255,255,255,0.93);
      --card-blur: blur(12px);
      --accent: #ff968a;
      --accent-light: #ffe4d6;
      --danger: #ff6f91;
      --warn: #ffd27f;
      --avatar-bg: #ffe4d6;
      --shadow: 0 8px 32px 0 rgba(255,150,138,0.11);
      --radius: 22px;
      --text: #3b1d21;
      --muted: #b5887e;
      --tab-active: #ff968a;
      --tab-inactive: #b7c9d1;
      --mood-bg: #fff5e1;
      --fab-size: 62px;
      --toast-bg: #3b1d21ee;
      --toast-txt: #fff;
      --blur-modal-bg: rgba(255,223,200,0.24);
    }
    [data-theme="dark"] {
      --bg: #211616;
      --card: rgba(30, 20, 18, 0.93);
      --card-blur: blur(15px);
      --accent: #ff968a;
      --accent-light: #372b26;
      --text: #ffe5de;
      --muted: #f8b4a0;
      --tab-active: #ff968a;
      --tab-inactive: #856560;
      --mood-bg: #372b26;
      --avatar-bg: #372b26;
      --toast-bg: #ffe4d6ee;
      --toast-txt: #3b1d21;
      --blur-modal-bg: rgba(44, 23, 14, 0.33);
    }
    html, body {
      background: var(--bg);
      font-family: 'Nunito', Arial, sans-serif;
      margin: 0; padding: 0;
      color: var(--text);
      height: 100%;
    }
    #app-frame {
      width: 100vw;
      max-width: 420px;
      min-height: 100vh;
      margin: 0 auto;
      box-shadow: 0 8px 32px 0 rgba(255,150,138,0.09);
      background: var(--bg);
      display: flex;
      flex-direction: column;
      position: relative;
      overflow-x: hidden;
    }
    .header {
      padding: 14px 18px 4px 18px;
      font-weight: 700;
      font-size: 1.6rem;
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: transparent;
      z-index: 2;
    }
    .avatar {
      width: 44px; height: 44px;
      border-radius: 50%;
      background: var(--avatar-bg);
      box-shadow: 0 2px 8px 0 #ff968a31;
      display: flex; align-items: center; justify-content: center;
      font-size: 2em;
      font-weight: 700;
      color: var(--accent);
      margin-right: 6px;
    }
    .hero-section {
      display: flex;
      align-items: center;
      padding: 7px 18px 13px 18px;
      gap: 15px;
      background: none;
    }
    .greeting {
      font-size: 1.18em;
      font-weight: 700;
      margin-bottom: 3px;
      color: var(--accent);
    }
    .streak-badge {
      display: inline-flex;
      align-items: center;
      background: var(--card);
      border-radius: 14px;
      box-shadow: var(--shadow);
      padding: 3px 11px;
      font-size: 0.98em;
      font-weight: 600;
      color: var(--accent);
      margin-top: 1px;
      margin-left: 1px;
      backdrop-filter: var(--card-blur);
      border: 1.2px solid #fae3de;
    }
    .main-content {
      flex: 1;
      min-height: 400px;
      padding-bottom: 80px;
      padding-top: 2px;
    }
    .fab {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 68px;
      z-index: 99;
      width: var(--fab-size);
      height: var(--fab-size);
      border-radius: 50%;
      background: var(--accent);
      color: #fff;
      border: none;
      box-shadow: 0 8px 30px 0 #ff968a33;
      font-size: 2.2em;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fabpulse 1.8s infinite alternate;
      cursor: pointer;
      transition: background 0.18s, box-shadow 0.18s;
    }
    .fab:active { background: #f85a6a; }
    @keyframes fabpulse {
      0% { box-shadow: 0 8px 30px 0 #ff968a33;}
      100% { box-shadow: 0 16px 45px 0 #ffd27f44;}
    }
    /* Tab bar */
    .tab-bar {
      display: flex;
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 0;
      width: 100vw;
      max-width: 420px;
      background: var(--card);
      border-top: 1.5px solid #fae3de;
      z-index: 99;
      box-shadow: 0 -3px 22px 0 #ffd27f19;
      border-radius: 17px 17px 0 0;
      justify-content: space-around;
      padding: 2px 0 3px 0;
      backdrop-filter: var(--card-blur);
    }
    .tab-btn {
      flex: 1;
      border: none;
      background: none;
      font: inherit;
      color: var(--tab-inactive);
      text-align: center;
      font-size: 1.1em;
      transition: color 0.18s;
      outline: none;
      position: relative;
      padding: 8px 0 0 0;
      cursor: pointer;
      min-width: 46px;
      background: none;
    }
    .tab-btn.active {
      color: var(--tab-active);
      font-weight: 700;
    }
    .tab-btn .tab-indicator {
      display: none;
    }
    .tab-btn.active .tab-indicator {
      display: block;
      width: 32px;
      height: 3.5px;
      border-radius: 2px;
      background: var(--tab-active);
      margin: 3px auto 0 auto;
      animation: tabslide 0.25s;
    }
    @keyframes tabslide {
      0% { transform: scaleX(0.3);}
      100% { transform: scaleX(1);}
    }
    /* Toast */
    .toast {
      position: fixed;
      left: 50%;
      bottom: 112px;
      transform: translateX(-50%);
      min-width: 120px;
      background: var(--toast-bg);
      color: var(--toast-txt);
      font-size: 1.08em;
      font-weight: 700;
      border-radius: 16px;
      box-shadow: 0 3px 18px 0 #ff968a33;
      padding: 13px 26px;
      z-index: 999;
      text-align: center;
      opacity: 0;
      pointer-events: none;
      animation: toastin 2.2s;
    }
    @keyframes toastin {
      0% {opacity:0; transform:translate(-50%,20px);}
      10% {opacity:1; transform:translate(-50%,0);}
      85% {opacity:1;}
      100% {opacity:0;}
    }
    /* Responsive */
    @media (max-width: 480px) {
      #app-frame { max-width: 100vw; border-radius: 0;}
      .tab-bar { max-width: 100vw; border-radius: 0;}
    }
  </style>
</head>
<body>
  <div id="app-frame">
    <div class="header">
      <span id="header-title"><span class="material-icons" style="font-size:1.05em;color:var(--accent);vertical-align:middle;">menu_book</span> Clarity</span>
      <span class="material-icons" style="font-size:1.45em;cursor:pointer;color:var(--accent);" onclick="toggleTheme()" title="Toggle Theme" id="theme-icon">dark_mode</span>
    </div>
    <div class="hero-section" id="hero-section">
      <div class="avatar">T</div>
      <div>
        <div class="greeting" id="greeting">Hi Timir,</div>
        <div class="streak-badge"><span class="material-icons" style="font-size:1.04em;vertical-align:middle;">local_fire_department</span>&nbsp;<span id="streak-count">3</span>&nbsp;day streak</div>
      </div>
    </div>
    <div class="main-content" id="main-content"></div>
    <button class="fab" id="fab-btn" title="New Entry" onclick="openEditor()">
      <span class="material-icons" style="font-size:1.5em;">add</span>
    </button>
    <nav class="tab-bar" id="tab-bar">
      <button class="tab-btn active" onclick="switchTab(0)"><span class="material-icons" style="font-size:1.25em;">home</span><div class="tab-indicator"></div></button>
      <button class="tab-btn" onclick="switchTab(1)"><span class="material-icons" style="font-size:1.25em;">calendar_today</span><div class="tab-indicator"></div></button>
      <button class="tab-btn" onclick="switchTab(2)"><span class="material-icons" style="font-size:1.25em;">spa</span><div class="tab-indicator"></div></button>
      <button class="tab-btn" onclick="switchTab(3)"><span class="material-icons" style="font-size:1.25em;">emoji_events</span><div class="tab-indicator"></div></button>
      <button class="tab-btn" onclick="switchTab(4)"><span class="material-icons" style="font-size:1.25em;">forum</span><div class="tab-indicator"></div></button>
      <button class="tab-btn" onclick="switchTab(5)"><span class="material-icons" style="font-size:1.25em;">settings</span><div class="tab-indicator"></div></button>
    </nav>
    <div id="toast" class="toast" style="display:none;"></div>
  </div>
<!-- PART 1 END -->
<!-- PART 2 START -->
<!-- Main JS for all features, screens, modals, demo data -->

<script>
/* --- Demo Data --- */
let journalEntries = [
  {title:"A Calm Start", content:"Took a long walk at sunrise. Feeling grounded.", mood:"üòä", moodLabel:"Happy", date:"2025-07-06", tags:["gratitude","morning"], media:[]},
  {title:"Challenging Day", content:"Felt anxious about work, but managed with some deep breathing.", mood:"üòü", moodLabel:"Anxious", date:"2025-07-05", tags:["anxiety","breathing"], media:[]},
  {title:"Meditation Win", content:"Completed a 10-min meditation. Thoughts felt lighter after.", mood:"üòå", moodLabel:"Calm", date:"2025-07-04", tags:["meditation","calm"], media:[]},
];
let communityPosts = [
  {user:"üåø ZenFox", msg:"Today I let go of a small worry. Felt lighter instantly.", mood:"üòå", when:"1h ago"},
  {user:"‚òÄÔ∏è HopefulSky", msg:"Grateful for the rain and a hot cup of tea.", mood:"üòä", when:"2h ago"},
];
let visionBoard = [
  {img:"https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=220&q=80", caption:"Dream trip: Norway fjords"},
  {img:"https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=220&q=80", caption:"Healthy mornings"},
];

/* --- State --- */
let selectedTab = 0;
let moods = [
  {icon:"üòä", label:"Happy"},
  {icon:"üòå", label:"Calm"},
  {icon:"üòü", label:"Anxious"},
  {icon:"üò¢", label:"Sad"},
  {icon:"üò†", label:"Angry"},
  {icon:"ü§©", label:"Inspired"},
];
let selectedMood = 0;
let fontOptions = [
  {name:'Nunito', css:'Nunito, Arial, sans-serif'},
  {name:'Inter', css:'Inter, Arial, sans-serif'},
  {name:'Montserrat', css:'Montserrat, Arial, sans-serif'},
];

/* --- UI Helper: Toast --- */
function showToast(msg) {
  let toast = document.getElementById('toast');
  toast.innerText = msg;
  toast.style.display = 'block';
  toast.classList.remove('fadeout');
  setTimeout(()=>{ toast.style.display='none'; }, 2100);
}

/* --- Tabs --- */
function switchTab(idx) {
  selectedTab = idx;
  let tabs = document.querySelectorAll('.tab-btn');
  tabs.forEach((t,i)=>{
    t.classList.toggle('active',i===idx);
    let ind = t.querySelector('.tab-indicator');
    ind.style.display = (i===idx) ? "block" : "none";
  });
  document.getElementById('fab-btn').style.display = (idx===0) ? 'flex' : 'none';
  [
    renderHome, renderCalendar, renderWellness, renderJourney, renderCommunity, renderSettings
  ][idx]();
  updateHeader();
}
function updateHeader() {
  const titles = ['Clarity','Calendar','Wellness','Journey','Community','Settings'];
  document.getElementById('header-title').innerHTML =
    `<span class="material-icons" style="font-size:1.05em;color:var(--accent);vertical-align:middle;">${['menu_book','calendar_today','spa','emoji_events','forum','settings'][selectedTab]}</span> ${titles[selectedTab]}`;
}

/* --- Home Tab --- */
function renderHome() {
  let html = `
    <div style="margin:15px 15px 0 15px;">
      <input type="search" id="search-bar" placeholder="Search journal..." style="width:100%;padding:12px 16px;border-radius:15px;border:1.2px solid #ffd3bf;font-size:1.06em;background:var(--mood-bg);color:var(--text);box-shadow:0 2px 8px #ffd27f11;" oninput="filterEntries(this.value)" />
    </div>
    <div class="card" style="margin-top:16px;">
      <div style="font-size:1.07em;font-weight:700;color:var(--accent);margin-bottom:5px;">
        Today's Prompt
        <button style="float:right;background:var(--accent);color:#fff;border:none;padding:4px 13px 4px 8px;border-radius:12px;font-weight:600;cursor:pointer;" onclick="inspirePrompt()">Inspire Me!</button>
      </div>
      <div id="prompt-text" style="margin:5px 0 0 0;color:var(--muted);font-size:1.01em;">Write about a small win you had recently.</div>
    </div>
    <div class="card" style="margin-top:13px;">
      <div style="font-size:1.08em;font-weight:600;margin-bottom:5px;color:var(--accent);">
        How are you feeling today?
      </div>
      <div class="mood-row" id="home-mood">
        ${moods.map((m,i)=>`
          <div class="mood-chip${i===selectedMood?' selected':''}" onclick="selectMood(${i},true)" title="${m.label}">
            ${m.icon}&nbsp;<span>${m.label}</span>
          </div>
        `).join('')}
      </div>
      <button style="margin-top:6px;background:var(--accent);color:#fff;padding:7px 20px;border:none;border-radius:12px;font-weight:700;font-size:1em;box-shadow:0 2px 8px #ff968a22;cursor:pointer;" onclick="logMood()">Log Mood</button>
    </div>
    <div id="journal-entries-list">
    </div>
  `;
  document.getElementById('main-content').innerHTML = html;
  renderEntries();
  let homeMoods = document.querySelectorAll('#home-mood .mood-chip');
  homeMoods.forEach((btn,i)=>btn.onclick = ()=>selectMood(i,true));
}
function renderEntries(filter="") {
  let html = "";
  let entries = filter ?
    journalEntries.filter(e =>
      (e.title||"").toLowerCase().includes(filter.toLowerCase()) ||
      (e.content||"").toLowerCase().includes(filter.toLowerCase()) ||
      (e.tags||[]).some(t=>t.toLowerCase().includes(filter.toLowerCase()))
    ) : journalEntries;
  if(entries.length==0) html = `<div style="color:var(--muted);padding:16px 0;text-align:center;">No entries yet.</div>`;
  else html = entries.map((e,i)=>`
    <div class="card" onclick="viewEntry(${i})">
      <div class="entry-title">${e.mood} ${e.title||'Untitled'}</div>
      <div class="entry-meta">
        <span class="material-icons" style="font-size:1em;vertical-align:-2px;color:var(--accent);">event</span> ${e.date}
        &nbsp;<span class="material-icons" style="font-size:1em;vertical-align:-2px;color:var(--accent);">sentiment_satisfied_alt</span> ${e.moodLabel}
      </div>
      <div class="entry-content">${e.content}</div>
      <div class="entry-tags">
        ${e.tags&&e.tags.length?e.tags.map(t=>`<span class="material-icons" style="font-size:1em;vertical-align:-2px;color:var(--accent);">sell</span> ${t}`).join(''):''}
      </div>
    </div>
  `).join('');
  document.getElementById('journal-entries-list').innerHTML = html;
}
function filterEntries(val) {
  renderEntries(val);
}
function inspirePrompt() {
  let prompts = [
    "Describe a challenge you overcame this week.",
    "Write about someone who made you smile recently.",
    "What's a place where you feel most at peace?",
    "What are you grateful for today?",
    "Let it be. üå±"
  ];
  let idx = Math.floor(Math.random()*prompts.length);
  document.getElementById('prompt-text').innerText = prompts[idx];
  showToast("Prompt updated!");
}
function selectMood(idx,fromHome) {
  selectedMood = idx;
  let selector = fromHome?'#home-mood': '#mood-selector';
  let chips = document.querySelectorAll(selector+' .mood-chip');
  chips.forEach((b,i)=>b.classList.toggle('selected',i===idx));
}
function logMood() {
  showToast("Mood logged! (Demo)");
}

/* --- Entry Modal --- */
function openEditor() {
  if(document.getElementById('editor-modal')) document.getElementById('editor-modal').remove();
  let modal = document.createElement('div');
  modal.id = 'editor-modal';
  modal.className = 'editor-modal open';
  modal.innerHTML = `
    <div class="editor-page">
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <span style="font-size:1.14em;font-weight:700;color:var(--accent);">New Journal Entry</span>
        <span class="material-icons" style="font-size:1.42em;cursor:pointer;color:var(--danger);" onclick="closeEditor()">close</span>
      </div>
      <div style="margin-bottom:7px;">
        <button style="background:none;border:none;cursor:pointer;font-size:1.2em;color:var(--accent);" onclick="attachMedia()"><span class="material-icons">attach_file</span> Attach</button>
        <button style="background:none;border:none;cursor:pointer;font-size:1.2em;color:var(--accent);" onclick="startVoice()"><span class="material-icons">mic</span> Voice</button>
        <button style="background:none;border:none;cursor:pointer;font-size:1.2em;color:var(--accent);" onclick="insertPrompt()"><span class="material-icons">lightbulb</span> Inspire Me</button>
      </div>
      <div class="mood-row" id="mood-selector">
        ${moods.map((m,i)=>`
          <div class="mood-chip${i===0?' selected':''}" onclick="selectMood(${i})" title="${m.label}">
            ${m.icon}&nbsp;<span>${m.label}</span>
          </div>
        `).join('')}
      </div>
      <input class="editor-title" id="editor-title" placeholder="Title (optional)" maxlength="40" />
      <textarea class="editor-textarea" id="editor-content" placeholder="What's on your mind?..." maxlength="700"></textarea>
      <input class="tag-input" id="editor-tags" placeholder="Tags (comma separated)" maxlength="50"/>
      <div style="margin-top:9px;">
        <button style="background:var(--accent);color:#fff;padding:8px 18px;border:none;border-radius:11px;font-weight:700;font-size:1.07em;margin-right:10px;box-shadow:0 2px 8px #ff968a22;cursor:pointer;" onclick="saveEntry()">Save</button>
        <button style="background:var(--danger);color:#fff;padding:8px 18px;border:none;border-radius:11px;font-weight:700;font-size:1.07em;box-shadow:0 2px 8px #ff968a22;cursor:pointer;" onclick="closeEditor()">Cancel</button>
      </div>
    </div>
  `;
  document.body.appendChild(modal);
  renderMoodSelector();
}
function closeEditor() {
  let modal = document.getElementById('editor-modal');
  if(modal) modal.remove();
}
function renderMoodSelector() {
  let chips = document.querySelectorAll('#mood-selector .mood-chip');
  chips.forEach((b,i)=>b.onclick = ()=>selectMood(i));
}
function saveEntry() {
  let title = document.getElementById('editor-title').value.trim();
  let content = document.getElementById('editor-content').value.trim();
  let tags = document.getElementById('editor-tags').value.split(',').map(t=>t.trim()).filter(Boolean);
  if(!content) { showToast("Please write something!"); return; }
  let d = new Date();
  let date = d.toISOString().slice(0,10);
  journalEntries.unshift({
    title,
    content,
    mood: moods[selectedMood].icon,
    moodLabel: moods[selectedMood].label,
    date,
    tags,
    media:[]
  });
  closeEditor();
  if(selectedTab===0) renderHome();
  if(selectedTab===1) renderCalendar();
  showToast("Entry added!");
}
function attachMedia() {
  showToast("Attach: Demo only. File picker not implemented.");
}
function startVoice() {
  showToast("Voice: Demo only.");
}
function insertPrompt() {
  document.getElementById('editor-content').value += "\n" + document.getElementById('prompt-text').innerText;
}

/* --- Entry View Modal --- */
function viewEntry(i) {
  let e = journalEntries[i];
  let modal = document.createElement('div');
  modal.id = 'view-modal';
  modal.className = 'editor-modal open';
  modal.innerHTML = `
    <div class="editor-page" style="max-width:380px;">
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <span style="font-size:1.14em;font-weight:700;color:var(--accent);">Journal Entry</span>
        <span class="material-icons" style="font-size:1.42em;cursor:pointer;color:var(--danger);" onclick="closeView()">close</span>
      </div>
      <div style="margin-top:2px;font-size:1.09em;"><b>${e.title||'Untitled'}</b></div>
      <div style="color:var(--muted);margin-bottom:6px;">${e.date} ‚Ä¢ Mood: <b>${e.moodLabel} ${e.mood}</b></div>
      <div style="margin:6px 0 10px 0;white-space:pre-line;">${e.content}</div>
      ${e.tags&&e.tags.length?`<div style="margin:4px 0;color:var(--accent);font-size:1em;"><span class="material-icons" style="font-size:1em;vertical-align:-2px;color:var(--accent);">sell</span> ${e.tags.join(', ')}</div>`:""}
      <button style="margin-top:13px;background:var(--accent);color:#fff;padding:7px 20px;border:none;border-radius:12px;font-weight:700;font-size:1em;box-shadow:0 2px 8px #ff968a22;cursor:pointer;" onclick="closeView()">Close</button>
    </div>
  `;
  document.body.appendChild(modal);
}
function closeView() {
  let modal = document.getElementById('view-modal');
  if(modal) modal.remove();
}

/* --- Calendar Tab --- */
function renderCalendar() {
  let days = Array.from({length:7}).map((_,i)=> {
    let dt = new Date();
    dt.setDate(dt.getDate()-i);
    let day = dt.toISOString().slice(8,10), label = dt.toLocaleString('en-us',{weekday:'short'});
    return {day,label,full:dt.toISOString().slice(0,10)};
  }).reverse();
  let html = `<div class="card" style="margin-top:0;">
    <div style="font-weight:700;font-size:1.13em;color:var(--accent);margin-bottom:8px;">This Week</div>
    <div class="calendar-row">
    ${days.map(d=>`<button class="cal-day${journalEntries.some(e=>e.date===d.full)?' active':''}" title="${d.label}">${d.day}</button>`).join('')}
    </div>
    <div style="font-size:1.05em;font-weight:600;color:var(--accent);margin-bottom:3px;margin-top:11px;">Timeline</div>
    <div>
    ${journalEntries.map(e=>`
      <div class="entry-meta">
        <span class="material-icons" style="font-size:1em;vertical-align:-2px;color:var(--accent);">event</span> ${e.date} 
        <span style="margin-left:7px;">${e.mood} <b>${e.title||'Untitled'}</b></span>
      </div>
    `).join('')}
    </div>
    </div>`;
  document.getElementById('main-content').innerHTML = html;
}
/* --- Wellness Tab --- */
function renderWellness() {
  let html = `<div class="card" style="margin-top:0;">
    <div style="font-size:1.14em;font-weight:700;color:var(--accent);margin-bottom:7px;">
      Wellness Hub
    </div>
    <div class="wellness-grid">
      <div class="wellness-card" onclick="startMeditation()">
        <div class="wellness-icon">üßò‚Äç‚ôÇÔ∏è</div>
        <div class="wellness-title">Meditation</div>
        <div class="wellness-desc">Guided audio sessions</div>
      </div>
      <div class="wellness-card" onclick="startBreathing()">
        <div class="wellness-icon">üå¨Ô∏è</div>
        <div class="wellness-title">Breathing</div>
        <div class="wellness-desc">Animated exercises</div>
      </div>
      <div class="wellness-card" onclick="showAffirmation()">
        <div class="wellness-icon">üí≠</div>
        <div class="wellness-title">Affirmations</div>
        <div class="wellness-desc">Positive daily prompts</div>
      </div>
      <div class="wellness-card" onclick="showGratitude()">
        <div class="wellness-icon">üôè</div>
        <div class="wellness-title">Gratitude</div>
        <div class="wellness-desc">Log your gratitude</div>
      </div>
      <div class="wellness-card" onclick="showVisionBoard()">
        <div class="wellness-icon">üåÖ</div>
        <div class="wellness-title">Vision Board</div>
        <div class="wellness-desc">Dreams & goals</div>
      </div>
    </div>
    <div id="wellness-extra"></div>
  </div>`;
  document.getElementById('main-content').innerHTML = html;
}
function startMeditation() {
  document.getElementById('wellness-extra').innerHTML = `
    <div class="affirmation-card" style="background:var(--card);color:var(--accent);">
      <span style="font-size:2em;">üßò‚Äç‚ôÇÔ∏è</span><br/>
      Meditation in progress...
      <div style="font-size:1.07em;">(10 min guided audio, demo only)</div>
      <button class="save-btn" onclick="closeWellnessExtra()" style="margin-top:11px;">Done</button>
    </div>
  `;
}
function startBreathing() {
  document.getElementById('wellness-extra').innerHTML = `
    <div class="affirmation-card" style="background:var(--card);color:var(--accent);">
      <div class="breathing-anim">üå¨Ô∏è</div>
      <b>Box Breathing</b><br/>
      Inhale <span style="color:var(--accent);font-weight:600;">4s</span>,
      Hold <span style="color:var(--warn);font-weight:600;">4s</span>,
      Exhale <span style="color:var(--danger);font-weight:600;">4s</span>
      <br/><span style="font-size:0.98em;color:var(--muted);">Repeat for 2 min</span>
      <button class="save-btn" onclick="closeWellnessExtra()" style="margin-top:9px;">Done</button>
    </div>
  `;
}
function showAffirmation() {
  let affirm = [
    "You are enough, exactly as you are.",
    "Today, I give myself permission to rest.",
    "Every day is a fresh start.",
    "Growth is a journey, not a race.",
    "Let it be. üå±"
  ];
  let idx = Math.floor(Math.random()*affirm.length);
  document.getElementById('wellness-extra').innerHTML = `
    <div class="affirmation-card">
      <span class="heart">‚ù§Ô∏è</span>
      ${affirm[idx]}
      <button class="save-btn" onclick="closeWellnessExtra()" style="margin-top:14px;">Close</button>
    </div>
  `;
}
function showGratitude() {
  document.getElementById('wellness-extra').innerHTML = `
    <div class="affirmation-card" style="background:var(--warn);color:#fff;">
      <span style="font-size:1.18em;">üôè</span><br/>
      <b>Gratitude Entry</b><br/>
      <input type="text" id="gratitude-input" style="width:95%;padding:6px 8px;margin:8px 0;border-radius:9px;border:none;" placeholder="Today I am grateful for..." />
      <button class="save-btn" onclick="saveGratitude()">Save</button>
      <button class="close-btn" onclick="closeWellnessExtra()" style="margin-left:8px;">Close</button>
    </div>
  `;
}
function saveGratitude() {
  let val = document.getElementById('gratitude-input').value.trim();
  if(val) showToast("Gratitude saved! (Demo)");
  else showToast("Enter something!");
  closeWellnessExtra();
}
function showVisionBoard() {
  let html = `
    <div class="affirmation-card" style="background:var(--accent-light);color:var(--accent);padding:17px 7px;">
      <div style="font-weight:700;margin-bottom:6px;">Vision Board</div>
      <div style="display:flex;gap:7px;overflow-x:auto;">
        ${visionBoard.map(v=>`
          <div style="flex:0 0 110px;background:var(--card);border-radius:13px;padding:6px;margin-right:3px;box-shadow:0 2px 8px #ffd27f22;">
            <img src="${v.img}" style="width:100px;height:75px;object-fit:cover;border-radius:10px;" />
            <div style="font-size:0.96em;color:var(--accent);margin-top:4px;">${v.caption}</div>
          </div>
        `).join('')}
        <div onclick="addVision()" style="flex:0 0 110px;display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--card);border-radius:13px;padding:6px;cursor:pointer;border:1.3px dashed var(--accent);color:var(--accent);">
          <span class="material-icons" style="font-size:2em;">add</span>Add
        </div>
      </div>
      <button class="save-btn" onclick="closeWellnessExtra()" style="margin-top:13px;">Close</button>
    </div>
  `;
  document.getElementById('wellness-extra').innerHTML = html;
}
function addVision() {
  showToast("Demo: Vision image add (not implemented)");
}
function closeWellnessExtra() {
  document.getElementById('wellness-extra').innerHTML = "";
}

/* --- Journey Tab --- */
function renderJourney() {
  let streak = Math.min(journalEntries.length,14);
  let badges = [
    {icon:"‚òÄÔ∏è",label:"First Entry"},
    {icon:"üåô",label:"7 Days"},
    {icon:"üíé",label:"Wellness"},
    {icon:"üéâ",label:"Consistency"}
  ];
  let html = `<div class="card" style="margin-top:0;">
    <div style="font-size:1.13em;font-weight:700;color:var(--accent);margin-bottom:8px;">
      Your Progress
    </div>
    <div class="progress-grid">
      <div class="progress-card">
        <div class="progress-title">Streak</div>
        <div style="font-size:1.7em;">${streak} <span class="material-icons" style="color:var(--accent);vertical-align:-4px;">local_fire_department</span></div>
        <div class="progress-desc">Days in a row</div>
      </div>
      <div class="progress-card">
        <div class="progress-title">Badges</div>
        <div style="font-size:1.3em;">
          ${badges.slice(0,Math.floor(streak/3)+1).map(b=>`${b.icon}`).join(' ')}
        </div>
        <div class="progress-desc">Keep growing!</div>
      </div>
    </div>
    <div class="progress-card" style="margin:13px 4px 3px 4px;">
      <div class="progress-title">Milestones</div>
      <div style="color:var(--accent);font-weight:700;font-size:1.09em;">${journalEntries.length} entries</div>
      <div class="progress-desc">You've unlocked new insights!</div>
    </div>
    <div class="progress-card" style="margin:13px 4px 3px 4px;">
      <div class="progress-title">Set a Goal</div>
      <input type="text" id="goal-input" placeholder="Your next milestone..." style="width:90%;padding:7px 8px;border-radius:8px;border:1.2px solid #ffd3bf;margin-top:4px;" />
      <button class="save-btn" onclick="saveGoal()" style="margin-top:6px;">Save</button>
    </div>
  </div>
  <div class="card" style="margin-top:13px;">
    <div class="progress-title">Habit Tracker</div>
    <div style="display:flex;gap:15px;margin-top:8px;">
      <div onclick="toggleHabit(this)" style="cursor:pointer;flex:1;display:flex;flex-direction:column;align-items:center;">
        <span class="material-icons" style="font-size:2em;color:var(--accent);">water_drop</span>
        <span style="font-size:0.93em;color:var(--muted);">Water</span>
      </div>
      <div onclick="toggleHabit(this)" style="cursor:pointer;flex:1;display:flex;flex-direction:column;align-items:center;">
        <span class="material-icons" style="font-size:2em;color:var(--accent);">hotel</span>
        <span style="font-size:0.93em;color:var(--muted);">Sleep</span>
      </div>
      <div onclick="toggleHabit(this)" style="cursor:pointer;flex:1;display:flex;flex-direction:column;align-items:center;">
        <span class="material-icons" style="font-size:2em;color:var(--accent);">directions_run</span>
        <span style="font-size:0.93em;color:var(--muted);">Exercise</span>
      </div>
    </div>
  </div>
  `;
  document.getElementById('main-content').innerHTML = html;
}
function saveGoal() {
  let val = document.getElementById('goal-input').value.trim();
  if(val) showToast("Goal saved! (Demo)");
  else showToast("Enter something!");
}
function toggleHabit(el) {
  el.querySelector('.material-icons').style.color = "#ffd27f";
  showToast("Habit marked! (Demo)");
}

/* --- Community Wall Tab --- */
function renderCommunity() {
  let html = `<div class="card" style="margin-top:0;">
    <div style="font-size:1.13em;font-weight:700;color:var(--accent);margin-bottom:8px;">
      Community Wall
    </div>
    <div>
      ${communityPosts.map(p=>`
        <div style="background:var(--accent-light);margin-bottom:10px;padding:10px 14px;border-radius:11px;">
          <b>${p.user}</b> <span style="color:var(--muted);font-size:0.96em;">${p.when}</span>
          <div style="margin:4px 0;">${p.msg}</div>
          <span style="font-size:1.25em;">${p.mood}</span>
        </div>
      `).join('')}
      <div style="margin-top:16px;">
        <input type="text" id="community-msg" placeholder="Share a thought..." style="width:80%;padding:8px 10px;border-radius:9px;border:1.2px solid #ffd3bf;margin-right:4px;" />
        <button class="save-btn" onclick="postCommunity()">Post</button>
      </div>
    </div>
  </div>`;
  document.getElementById('main-content').innerHTML = html;
}
function postCommunity() {
  let val = document.getElementById('community-msg').value.trim();
  if(val) {
    communityPosts.unshift({user:"üåü You", msg:val, mood:"üòä", when:"just now"});
    renderCommunity();
    showToast("Shared!");
  } else showToast("Type something!");
}

/* --- Settings Tab --- */
function renderSettings() {
  let html = `
    <div class="settings-list">
      <div class="settings-item">
        <span class="material-icons" style="color:var(--accent);vertical-align:-2px;margin-right:4px;">dark_mode</span>
        Theme
        <select onchange="setTheme(this.value)" style="margin-left:8px;">
          <option value="light">Light</option>
          <option value="dark">Dark</option>
          <option value="auto">Auto</option>
        </select>
      </div>
      <div class="settings-item">
        <span class="material-icons" style="color:var(--accent);vertical-align:-2px;margin-right:4px;">font_download</span>
        Font
        <select onchange="setFont(this.value)" style="margin-left:8px;">
          ${fontOptions.map((f,i)=>`<option value="${i}">${f.name}</option>`).join('')}
        </select>
      </div>
      <div class="settings-item">
        <span class="material-icons" style="color:var(--accent);vertical-align:-2px;margin-right:4px;">translate</span>
        Language
        <select style="margin-left:8px;" onchange="changeLang(this.value)">
          <option value="en">English</option>
          <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
          <option value="es">Espa√±ol</option>
        </select>
      </div>
      <div class="settings-item">
        <span class="material-icons" style="color:var(--accent);vertical-align:-2px;margin-right:4px;">notifications_active</span>
        Notifications
        <input type="checkbox" checked onchange="showToast('Notifications toggled! (Demo)')"/>
      </div>
      <div class="settings-item">
        <span class="material-icons" style="color:var(--accent);vertical-align:-2px;margin-right:4px;">cloud_sync</span>
        Cloud Sync & Backup
        <input type="checkbox" checked onchange="showToast('Cloud sync toggled! (Demo)')"/>
      </div>
      <div class="settings-item">
        <span class="material-icons" style="color:var(--accent);vertical-align:-2px;margin-right:4px;">download</span>
        Export Data
        <button class="save-btn" style="padding:6px 12px;font-size:0.97em;" onclick="showToast('Export coming soon!')">PDF</button>
      </div>
      <div class="settings-item">
        <span class="material-icons" style="color:var(--accent);vertical-align:-2px;margin-right:4px;">lock</span>
        Security
        <button class="save-btn" onclick="showToast('Lock enabled! (Demo)')">Enable Lock</button>
      </div>
      <div class="settings-item">
        <span class="material-icons" style="color:var(--accent);vertical-align:-2px;margin-right:4px;">watch</span>
        Device Integration
        <button class="save-btn" onclick="showToast('Connected! (Demo)')">Connect Device</button>
      </div>
      <div class="settings-item">
        <span class="material-icons" style="color:var(--accent);vertical-align:-2px;margin-right:4px;">info</span>
        About
        <span class="settings-label">Clarity Journal v1.0</span>
      </div>
    </div>
  `;
  document.getElementById('main-content').innerHTML = html;
}
function setFont(idx) {
  document.body.style.fontFamily = fontOptions[idx].css;
  showToast("Font changed! (Demo)");
}
function changeLang(val) {
  showToast("Language: " + val + " (Demo only)");
}
function toggleTheme() {
  let cur = document.documentElement.getAttribute('data-theme')||'light';
  let next = cur==='dark'?'light':'dark';
  setTheme(next);
}
function setTheme(theme) {
  if(theme==='auto') {
    if(window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches)
      theme = 'dark';
    else
      theme = 'light';
  }
  document.documentElement.setAttribute('data-theme',theme);
  document.getElementById('theme-icon').innerText = theme==='dark'?'light_mode':'dark_mode';
}

/* --- Init: Load Home Tab & Theme --- */
window.onload = ()=>{
  renderHome();
  setTheme('light');
};
</script>
</body>
</html>
<!-- PART 3 END -->
